(()=>{"use strict";const t=(t,e)=>{let s=!1;return function(){if(s)return;const a=this,n=arguments;s=!0,setTimeout((()=>{t.apply(a,n),s=!1}),e)}},e=()=>window.pageYOffset||document.documentElement.scrollTop;class s{static stateClasses={invalid:"is-invalid"};static getInputs(t){return[...t.querySelectorAll(l.formElements.input)]}static expression={email:/^[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*@([a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?\.)*(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|[a-z][a-z])$/,name:/^[A-Za-z0-9]+$/};static patterns=new Map([["",t=>s.isValidateEmpty(t)],["email",t=>s.isValidateEmail(t)],["name",t=>s.isValidateName(t)],["message",t=>t.value.length<120]]);static isValid(t,e=!0){const a=s.getInputs(t);let n=!0;return a.forEach((t=>{const a=t.getAttribute((o=l.formElements.input).substring(1,o.length-1));var o;const c=(s.patterns.has(a)?s.patterns.get(a):s.patterns.get(""))(t);e&&s.setInputState(t,c),c||(n=!1)})),n}static setInputState(t,e=!0){return e?t.classList.remove(s.stateClasses.invalid):t.classList.add(s.stateClasses.invalid)}static isValidateEmpty(t){return!!t.value.trim().length}static isValidateEmail(t){return s.expression.email.test(t.value)}static isValidateName(t){return s.expression.name.test(t.value)&&t.value.length>1&&t.value.length<20}}const a="[data-js-modal-open-button]",{body:n}=document,o=document.querySelector("[data-js-header-top]");class c{constructor(){this.constructor.bindEvents()}static handleOpenButtonClick(t){t.preventDefault();const e=((t,e)=>{const s=e.substring(1,e.length-1),a=t.getAttribute(s);let n={};try{n=JSON.parse(a)}catch(t){console.debug(t)}return n})(t.target,a),{src:s}=e;if(!s)return console.debug("Selector is not found data-js attribute of element:"),void console.debug(t.targret);const c=document.querySelector(s);c?(c.classList.add("active-modal"),o.classList.remove("header__top--fixed"),n.classList.add("compensation-padd"),n.classList.add("lock")):console.debug(`Modal element by ${s} selector is not found`)}static closeLastModal(){const t=[...document.querySelectorAll(".active-modal")].at(-1);t&&(t.classList.remove("active-modal"),n.classList.remove("compensation-padd"),o.classList.add("header__top--fixed"),n.classList.remove("lock"))}static handleCloseButtonClick(t){t.preventDefault(),c.closeLastModal()}static handleClick(t){const{target:e}=t,s=t=>e.matches(t);switch(!0){case s(a):c.handleOpenButtonClick(t);break;case s("[data-js-modal-close-button]"):case s("[data-js-modal]"):c.handleCloseButtonClick(t)}}static bindEvents(){document.addEventListener("click",(t=>{this.handleClick(t)})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&(t.preventDefault(),this.closeLastModal())}))}}class i{static async send(t){const{action:e=window.location.href,method:s="GET"}=t,a=new FormData(t);console.debug([...a]),await fetch(e,{method:s,body:"POST"===s?a:null}).then((t=>Promise.resolve(t.json())),(t=>(console.debug(t),Promise.reject(t))))}static onSuccess(t){console.debug(t),c.closeLastModal(),document.body.classList.add("lock"),document.querySelector('[data-js-modal="send-sucess"]').classList.add("active-modal")}static onError(){c.closeLastModal(),document.body.classList.add("lock"),document.querySelector('[data-js-modal="send-error"]').classList.add("active-modal")}}class l{static instance="[data-js-form]";static formElements={input:"[data-js-input-required]"};constructor(){this.constructor.bindEvents()}static handleSubmit(t){const{target:e}=t;e.matches(l.instance)&&(t.preventDefault(),s.isValid(e)&&(i.send(e).then((t=>i.onSuccess(t)),(t=>i.onError(t))),e.reset()))}static bindEvents(){document.addEventListener("submit",(t=>{this.handleSubmit(t)}))}}const d="[data-js-menu-button]";class r{constructor(){this.constructor.bindEvents()}static toggleMenu(){const t=document.querySelector("[data-js-menu]"),e="menu--active";t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)}static transformation(){const t=document.querySelector("[data-js-header-top]"),s=document.querySelector(d),a=e();a>200?(t.classList.add("bg--gray-blue"),s.classList.add("bg--gray-blue"),t.classList.add("header__top--is-scrolled")):a<200&&(t.classList.remove("bg--gray-blue"),s.classList.remove("bg--gray-blue"),t.classList.remove("header__top--is-scrolled"))}static handleClick(t){const{target:e}=t,s=t=>e.matches(t);switch(!0){case s(d):case s("[data-js-menu-link]"):r.toggleMenu()}}static bindEvents(){document.addEventListener("click",(t=>{this.handleClick(t)})),window.onscroll=t(r.transformation,300)}}const u=[...document.querySelectorAll("[data-js-anim-items]")];class m{constructor(){this.constructor.bindEvents()}static animOnScroll(){u.length<=0||u.map((t=>{const s=t.offsetHeight,a=(t=>{const s=t.getBoundingClientRect(),a=e();return{top:s.top+a}})(t).top;let n=window.innerHeight-s/8;s>window.innerHeight&&(n=window.innerHeight-window.innerHeight/8);const o="_active";return window.scrollY>a-n&&window.scrollY<a+s?t.classList.add(o):t.classList.remove(o),null}))}static bindEvents(){this.animOnScroll(),window.addEventListener("scroll",t(this.animOnScroll,200))}}!function(t){const e=new Image;e.onerror=()=>{(t=>{const e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)})(2===e.height)},e.onload=e.onerror,e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),document.addEventListener("DOMContentLoaded",(()=>{new c,new l,new r,new m}))})();