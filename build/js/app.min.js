(()=>{"use strict";const e=(e,t)=>{let s=!1;return function(){if(s)return;const a=this,n=arguments;s=!0,setTimeout((()=>{e.apply(a,n),s=!1}),t)}};class t{static getInputs(e){return[...e.querySelectorAll(l.els.input)]}static expression={email:/^[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*@([a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?\.)*(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|[a-z][a-z])$/,name:/^[A-Za-z0-9]+$/};static patterns=new Map([["",e=>t.isValidateEmpty(e)],["email",e=>t.isValidateEmail(e)],["name",e=>t.isValidateName(e)],["message",e=>e.value.length<12]]);static isValid(e,s=!0){const a=t.getInputs(e);let n=!0;return a.forEach((e=>{const a=e.getAttribute((o=l.els.input).substring(1,o.length-1));var o;const c=(t.patterns.has(a)?t.patterns.get(a):t.patterns.get(""))(e);s&&t.setInputState(e,c),c||(n=!1)})),n}static setInputState(e,t=!0){t?e.classList.remove(l.stateClasses.invalid):e.classList.add(l.stateClasses.invalid)}static isValidateEmpty(e){return!!e.value.trim().length}static isValidateEmail(e){return t.expression.email.test(e.value)}static isValidateName(e){return t.expression.name.test(e.value)&&e.value.length>1&&e.value.length<20}}const s="[data-js-modal-open-button]",a=document.body,n=document.querySelector("[data-js-header-top]");class o{constructor(){this.bindEvents()}handleOpenButtonClick(e){e.preventDefault();const t=((e,t)=>{const s=t.substring(1,t.length-1),a=e.getAttribute(s);let n={};try{n=JSON.parse(a)}catch(e){console.debug(e)}return n})(e.target,s),{src:o}=t;if(!o)return console.debug("Selector is not found data-js attribute of element:"),void console.debug(e.targret);const c=document.querySelector(o);c?(c.classList.add("active-modal"),n.classList.remove("header__top--fixed"),a.classList.add("compensation-padd"),a.classList.add("lock")):console.debug("Modal element by `${src}` selector is not found")}static closeLastModal(){const e=[...document.querySelectorAll(".active-modal")].at(-1);e&&(e.classList.remove("active-modal"),a.classList.remove("compensation-padd"),n.classList.add("header__top--fixed"),a.classList.remove("lock"))}handleCloseButtonClick(e){e.preventDefault(),o.closeLastModal()}handleClick(e){const{target:t}=e,a=e=>t.matches(e);switch(!0){case a(s):this.handleOpenButtonClick(e);break;case a("[data-js-modal-close-button]"):case a("[data-js-modal]"):this.handleCloseButtonClick(e)}}bindEvents(){document.addEventListener("click",(e=>{this.handleClick(e)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(e.preventDefault(),o.closeLastModal())}))}}class c{constructor(){}static async send(e){const{action:t=window.location.href,method:s="GET"}=e,a=new FormData(e);return console.debug([...a]),await fetch(t,{method:s,body:"POST"===s?a:null}).then((e=>Promise.resolve(e.json())),(e=>(console.debug(e),Promise.reject(e))))}static onSuccess(e){console.debug(e),o.closeLastModal(),document.body.classList.add("lock"),document.querySelector('[data-js-modal="send-sucess"]').classList.add("active-modal")}static onError(){o.closeLastModal(),document.body.classList.add("lock"),document.querySelector('[data-js-modal="send-error"]').classList.add("active-modal")}}class l{static instance="[data-js-form]";static els={input:"[data-js-input-required]"};static stateClasses={invalid:"is-invalid"};constructor(){this.bindEvents()}handleSubmit(e){const{target:s}=e;s.matches(l.instance)&&(e.preventDefault(),t.isValid(s)&&(c.send(s).then((e=>c.onSuccess(e)),(e=>c.onError(e))),s.reset()))}bindEvents(){document.addEventListener("submit",(e=>{this.handleSubmit(e)}))}}const i=document.querySelector("[data-js-header-top]"),d=document.querySelector("[data-js-menu-button]"),r=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;e>200?(i.classList.add("bg--gray-blue"),d.classList.add("bg--gray-blue"),i.classList.add("header__top--is-scrolled")):e<200&&(i.classList.remove("bg--gray-blue"),d.classList.remove("bg--gray-blue"),i.classList.remove("header__top--is-scrolled"))};!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),document.addEventListener("DOMContentLoaded",(()=>{new o,new l,window.onscroll=e(r,300),function(){const e=document.querySelector("[data-js-menu]");document.querySelector("[data-js-menu-button]").addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("menu--active")?e.classList.remove("menu--active"):e.classList.add("menu--active")}))}()}))})();